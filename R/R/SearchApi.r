# OpenLattice API
#
# OpenLattice API
#
# OpenAPI spec version: 0.0.1
# Contact: support@openlattice.com
# Generated by: https://openapi-generator.tech

#' @title Search operations
#' @description openlattice.Search
#'
#' @field path Stores url path of the request.
#' @field apiClient Handles the client-server communication.
#' @field userAgent Set the user agent of the request.
#'
#' @importFrom R6 R6Class
#'
#' @section Methods:
#' \describe{
#'
#' execute_advanced_entity_set_data_query Executes a search over the data of a given entity set to find rows that match the search term
#'
#'
#' execute_app_search Executes a search over all apps to find ones that match the given search term
#'
#'
#' execute_app_type_search Executes a search over all app types to find ones that match the given search term
#'
#'
#' execute_association_type_search Executes a search over all association types to find ones that match the given search term
#'
#'
#' execute_entity_neighbor_search Executes a search for all neighbors of an entity that are connected by an association
#'
#'
#' execute_entity_neighbor_search_bulk Executes a search for all neighbors of multiple entities of the same entity set that are connected by an association
#'
#'
#' execute_entity_set_collection_search Executes a search over all EntitySetCollections to find ones that match the given search term
#'
#'
#' execute_entity_set_data_query Executes a search over the data of a given entity set to find rows that match the search term
#'
#'
#' execute_entity_set_keyword_query The query, entityType, and propertyTypes params are all optional, but at least one must be specified otherwise an error will be thrown. All specified params are required to be present in each entity set returned. If entityType and propertyTypes are both specified, the propertyTypes param will be ignored.
#'
#'
#' execute_entity_type_collection_search Executes a search over all EntityTypeCollections to find ones that match the given search term
#'
#'
#' execute_entity_type_search Executes a search over all entity types to find ones that match the given search term
#'
#'
#' execute_filtered_entity_neighbor_id_search Executes a search for all neighbors of multiple entities of the same entity set that are connected by an association and returns a simple version of the neighborDetails
#'
#'
#' execute_filtered_entity_neighbor_search Executes a search for all neighbors of multiple entities of the same entity set that are connected by an association
#'
#'
#' execute_fqn_property_type_search Executes a search over all property types to find ones that match the given name and namespace, including partial matches
#'
#'
#' execute_organization_search Executes a search over all organizations to find ones that match the given search term
#'
#'
#' execute_property_type_search Executes a search over all property types to find ones that match the given search term
#'
#'
#' get_entity_sets Executes a search over all existing entity sets to populate the home page. The path parameters instruct which page to return and how large the page should be.
#'
#'
#' get_popular_entity_set Get the most popular entity sets.
#'
#'
#' search_entity_set_data Executes a search over the data of a given entity set to find rows that match the search term
#'
#' }
#'
#' @export
SearchApi <- R6::R6Class(
  'SearchApi',
  public = list(
    userAgent = "OpenAPI-Generator/0.1.0/r",
    apiClient = NULL,
    initialize = function(apiClient){
      if (!missing(apiClient)) {
        self$apiClient <- apiClient
      }
      else {
        self$apiClient <- ApiClient$new()
      }
    },
    execute_advanced_entity_set_data_query = function(entity_set_id, advanced_search, ...){
      args <- list(...)
      queryParams <- list()
      headerParams <- character()

      if (!missing(`advanced_search`)) {
        body <- `advanced_search`$toJSONString()
      } else {
        body <- NULL
      }

      urlPath <- "/datastore/search/advanced/{entitySetId}"
      if (!missing(`entity_set_id`)) {
        urlPath <- gsub(paste0("\\{", "entitySetId", "\\}"), `entity_set_id`, urlPath)
      }

      resp <- self$apiClient$callApi(url = paste0(self$apiClient$basePath, urlPath),
                                 method = "POST",
                                 queryParams = queryParams,
                                 headerParams = headerParams,
                                 body = body,
                                 ...)

      if (httr::status_code(resp) >= 200 && httr::status_code(resp) <= 299) {
                jsonlite::fromJSON(httr::content(resp, "text", encoding = "UTF-8"))
      } else if (httr::status_code(resp) >= 400 && httr::status_code(resp) <= 499) {
        Response$new("API client error", resp)
      } else if (httr::status_code(resp) >= 500 && httr::status_code(resp) <= 599) {
        Response$new("API server error", resp)
      }

    },
    execute_app_search = function(search_term, ...){
      args <- list(...)
      queryParams <- list()
      headerParams <- character()

      if (!missing(`search_term`)) {
        body <- `search_term`$toJSONString()
      } else {
        body <- NULL
      }

      urlPath <- "/datastore/search/app"
      resp <- self$apiClient$callApi(url = paste0(self$apiClient$basePath, urlPath),
                                 method = "POST",
                                 queryParams = queryParams,
                                 headerParams = headerParams,
                                 body = body,
                                 ...)

      if (httr::status_code(resp) >= 200 && httr::status_code(resp) <= 299) {
                jsonlite::fromJSON(httr::content(resp, "text", encoding = "UTF-8"))
      } else if (httr::status_code(resp) >= 400 && httr::status_code(resp) <= 499) {
        Response$new("API client error", resp)
      } else if (httr::status_code(resp) >= 500 && httr::status_code(resp) <= 599) {
        Response$new("API server error", resp)
      }

    },
    execute_app_type_search = function(search_term, ...){
      args <- list(...)
      queryParams <- list()
      headerParams <- character()

      if (!missing(`search_term`)) {
        body <- `search_term`$toJSONString()
      } else {
        body <- NULL
      }

      urlPath <- "/datastore/search/app_types"
      resp <- self$apiClient$callApi(url = paste0(self$apiClient$basePath, urlPath),
                                 method = "POST",
                                 queryParams = queryParams,
                                 headerParams = headerParams,
                                 body = body,
                                 ...)

      if (httr::status_code(resp) >= 200 && httr::status_code(resp) <= 299) {
                jsonlite::fromJSON(httr::content(resp, "text", encoding = "UTF-8"))
      } else if (httr::status_code(resp) >= 400 && httr::status_code(resp) <= 499) {
        Response$new("API client error", resp)
      } else if (httr::status_code(resp) >= 500 && httr::status_code(resp) <= 599) {
        Response$new("API server error", resp)
      }

    },
    execute_association_type_search = function(search_term, ...){
      args <- list(...)
      queryParams <- list()
      headerParams <- character()

      if (!missing(`search_term`)) {
        body <- `search_term`$toJSONString()
      } else {
        body <- NULL
      }

      urlPath <- "/datastore/search/association_types"
      resp <- self$apiClient$callApi(url = paste0(self$apiClient$basePath, urlPath),
                                 method = "POST",
                                 queryParams = queryParams,
                                 headerParams = headerParams,
                                 body = body,
                                 ...)

      if (httr::status_code(resp) >= 200 && httr::status_code(resp) <= 299) {
                jsonlite::fromJSON(httr::content(resp, "text", encoding = "UTF-8"))
      } else if (httr::status_code(resp) >= 400 && httr::status_code(resp) <= 499) {
        Response$new("API client error", resp)
      } else if (httr::status_code(resp) >= 500 && httr::status_code(resp) <= 599) {
        Response$new("API server error", resp)
      }

    },
    execute_entity_neighbor_search = function(entity_set_id, entity_key_id, ...){
      args <- list(...)
      queryParams <- list()
      headerParams <- character()

      urlPath <- "/datastore/search/{entitySetId}/{entityKeyId}"
      if (!missing(`entity_set_id`)) {
        urlPath <- gsub(paste0("\\{", "entitySetId", "\\}"), `entity_set_id`, urlPath)
      }

      if (!missing(`entity_key_id`)) {
        urlPath <- gsub(paste0("\\{", "entityKeyId", "\\}"), `entity_key_id`, urlPath)
      }

      resp <- self$apiClient$callApi(url = paste0(self$apiClient$basePath, urlPath),
                                 method = "GET",
                                 queryParams = queryParams,
                                 headerParams = headerParams,
                                 body = body,
                                 ...)

      if (httr::status_code(resp) >= 200 && httr::status_code(resp) <= 299) {
                jsonlite::fromJSON(httr::content(resp, "text", encoding = "UTF-8"))
      } else if (httr::status_code(resp) >= 400 && httr::status_code(resp) <= 499) {
        Response$new("API client error", resp)
      } else if (httr::status_code(resp) >= 500 && httr::status_code(resp) <= 599) {
        Response$new("API server error", resp)
      }

    },
    execute_entity_neighbor_search_bulk = function(entity_set_id, request_body, ...){
      args <- list(...)
      queryParams <- list()
      headerParams <- character()

      if (!missing(`request_body`)) {
        body <- `request_body`$toJSONString()
      } else {
        body <- NULL
      }

      urlPath <- "/datastore/search/{entitySetId}/neighbors"
      if (!missing(`entity_set_id`)) {
        urlPath <- gsub(paste0("\\{", "entitySetId", "\\}"), `entity_set_id`, urlPath)
      }

      resp <- self$apiClient$callApi(url = paste0(self$apiClient$basePath, urlPath),
                                 method = "POST",
                                 queryParams = queryParams,
                                 headerParams = headerParams,
                                 body = body,
                                 ...)

      if (httr::status_code(resp) >= 200 && httr::status_code(resp) <= 299) {
                jsonlite::fromJSON(httr::content(resp, "text", encoding = "UTF-8"))
      } else if (httr::status_code(resp) >= 400 && httr::status_code(resp) <= 499) {
        Response$new("API client error", resp)
      } else if (httr::status_code(resp) >= 500 && httr::status_code(resp) <= 599) {
        Response$new("API server error", resp)
      }

    },
    execute_entity_set_collection_search = function(search_term, ...){
      args <- list(...)
      queryParams <- list()
      headerParams <- character()

      if (!missing(`search_term`)) {
        body <- `search_term`$toJSONString()
      } else {
        body <- NULL
      }

      urlPath <- "/datastore/search/entity_sets/collections"
      resp <- self$apiClient$callApi(url = paste0(self$apiClient$basePath, urlPath),
                                 method = "POST",
                                 queryParams = queryParams,
                                 headerParams = headerParams,
                                 body = body,
                                 ...)

      if (httr::status_code(resp) >= 200 && httr::status_code(resp) <= 299) {
                jsonlite::fromJSON(httr::content(resp, "text", encoding = "UTF-8"))
      } else if (httr::status_code(resp) >= 400 && httr::status_code(resp) <= 499) {
        Response$new("API client error", resp)
      } else if (httr::status_code(resp) >= 500 && httr::status_code(resp) <= 599) {
        Response$new("API server error", resp)
      }

    },
    execute_entity_set_data_query = function(entity_set_id, search_term, ...){
      args <- list(...)
      queryParams <- list()
      headerParams <- character()

      if (!missing(`search_term`)) {
        body <- `search_term`$toJSONString()
      } else {
        body <- NULL
      }

      urlPath <- "/datastore/search/{entitySetId}"
      if (!missing(`entity_set_id`)) {
        urlPath <- gsub(paste0("\\{", "entitySetId", "\\}"), `entity_set_id`, urlPath)
      }

      resp <- self$apiClient$callApi(url = paste0(self$apiClient$basePath, urlPath),
                                 method = "POST",
                                 queryParams = queryParams,
                                 headerParams = headerParams,
                                 body = body,
                                 ...)

      if (httr::status_code(resp) >= 200 && httr::status_code(resp) <= 299) {
                jsonlite::fromJSON(httr::content(resp, "text", encoding = "UTF-8"))
      } else if (httr::status_code(resp) >= 400 && httr::status_code(resp) <= 499) {
        Response$new("API client error", resp)
      } else if (httr::status_code(resp) >= 500 && httr::status_code(resp) <= 599) {
        Response$new("API server error", resp)
      }

    },
    execute_entity_set_keyword_query = function(search, ...){
      args <- list(...)
      queryParams <- list()
      headerParams <- character()

      if (!missing(`search`)) {
        body <- `search`$toJSONString()
      } else {
        body <- NULL
      }

      urlPath <- "/datastore/search"
      resp <- self$apiClient$callApi(url = paste0(self$apiClient$basePath, urlPath),
                                 method = "POST",
                                 queryParams = queryParams,
                                 headerParams = headerParams,
                                 body = body,
                                 ...)

      if (httr::status_code(resp) >= 200 && httr::status_code(resp) <= 299) {
                jsonlite::fromJSON(httr::content(resp, "text", encoding = "UTF-8"))
      } else if (httr::status_code(resp) >= 400 && httr::status_code(resp) <= 499) {
        Response$new("API client error", resp)
      } else if (httr::status_code(resp) >= 500 && httr::status_code(resp) <= 599) {
        Response$new("API server error", resp)
      }

    },
    execute_entity_type_collection_search = function(search_term, ...){
      args <- list(...)
      queryParams <- list()
      headerParams <- character()

      if (!missing(`search_term`)) {
        body <- `search_term`$toJSONString()
      } else {
        body <- NULL
      }

      urlPath <- "/datastore/search/entity_types/collections"
      resp <- self$apiClient$callApi(url = paste0(self$apiClient$basePath, urlPath),
                                 method = "POST",
                                 queryParams = queryParams,
                                 headerParams = headerParams,
                                 body = body,
                                 ...)

      if (httr::status_code(resp) >= 200 && httr::status_code(resp) <= 299) {
                jsonlite::fromJSON(httr::content(resp, "text", encoding = "UTF-8"))
      } else if (httr::status_code(resp) >= 400 && httr::status_code(resp) <= 499) {
        Response$new("API client error", resp)
      } else if (httr::status_code(resp) >= 500 && httr::status_code(resp) <= 599) {
        Response$new("API server error", resp)
      }

    },
    execute_entity_type_search = function(search_term, ...){
      args <- list(...)
      queryParams <- list()
      headerParams <- character()

      if (!missing(`search_term`)) {
        body <- `search_term`$toJSONString()
      } else {
        body <- NULL
      }

      urlPath <- "/datastore/search/entity_types"
      resp <- self$apiClient$callApi(url = paste0(self$apiClient$basePath, urlPath),
                                 method = "POST",
                                 queryParams = queryParams,
                                 headerParams = headerParams,
                                 body = body,
                                 ...)

      if (httr::status_code(resp) >= 200 && httr::status_code(resp) <= 299) {
                jsonlite::fromJSON(httr::content(resp, "text", encoding = "UTF-8"))
      } else if (httr::status_code(resp) >= 400 && httr::status_code(resp) <= 499) {
        Response$new("API client error", resp)
      } else if (httr::status_code(resp) >= 500 && httr::status_code(resp) <= 599) {
        Response$new("API server error", resp)
      }

    },
    execute_filtered_entity_neighbor_id_search = function(entity_set_id, neighbor_search_filter, ...){
      args <- list(...)
      queryParams <- list()
      headerParams <- character()

      if (!missing(`neighbor_search_filter`)) {
        body <- `neighbor_search_filter`$toJSONString()
      } else {
        body <- NULL
      }

      urlPath <- "/datastore/search/{entitySetId}/neighbors/advanced/ids"
      if (!missing(`entity_set_id`)) {
        urlPath <- gsub(paste0("\\{", "entitySetId", "\\}"), `entity_set_id`, urlPath)
      }

      resp <- self$apiClient$callApi(url = paste0(self$apiClient$basePath, urlPath),
                                 method = "POST",
                                 queryParams = queryParams,
                                 headerParams = headerParams,
                                 body = body,
                                 ...)

      if (httr::status_code(resp) >= 200 && httr::status_code(resp) <= 299) {
                jsonlite::fromJSON(httr::content(resp, "text", encoding = "UTF-8"))
      } else if (httr::status_code(resp) >= 400 && httr::status_code(resp) <= 499) {
        Response$new("API client error", resp)
      } else if (httr::status_code(resp) >= 500 && httr::status_code(resp) <= 599) {
        Response$new("API server error", resp)
      }

    },
    execute_filtered_entity_neighbor_search = function(entity_set_id, neighbor_search_filter, ...){
      args <- list(...)
      queryParams <- list()
      headerParams <- character()

      if (!missing(`neighbor_search_filter`)) {
        body <- `neighbor_search_filter`$toJSONString()
      } else {
        body <- NULL
      }

      urlPath <- "/datastore/search/{entitySetId}/neighbors/advanced"
      if (!missing(`entity_set_id`)) {
        urlPath <- gsub(paste0("\\{", "entitySetId", "\\}"), `entity_set_id`, urlPath)
      }

      resp <- self$apiClient$callApi(url = paste0(self$apiClient$basePath, urlPath),
                                 method = "POST",
                                 queryParams = queryParams,
                                 headerParams = headerParams,
                                 body = body,
                                 ...)

      if (httr::status_code(resp) >= 200 && httr::status_code(resp) <= 299) {
                jsonlite::fromJSON(httr::content(resp, "text", encoding = "UTF-8"))
      } else if (httr::status_code(resp) >= 400 && httr::status_code(resp) <= 499) {
        Response$new("API client error", resp)
      } else if (httr::status_code(resp) >= 500 && httr::status_code(resp) <= 599) {
        Response$new("API server error", resp)
      }

    },
    execute_fqn_property_type_search = function(search_term, ...){
      args <- list(...)
      queryParams <- list()
      headerParams <- character()

      if (!missing(`search_term`)) {
        body <- `search_term`$toJSONString()
      } else {
        body <- NULL
      }

      urlPath <- "/datastore/search/property_types/fqn"
      resp <- self$apiClient$callApi(url = paste0(self$apiClient$basePath, urlPath),
                                 method = "POST",
                                 queryParams = queryParams,
                                 headerParams = headerParams,
                                 body = body,
                                 ...)

      if (httr::status_code(resp) >= 200 && httr::status_code(resp) <= 299) {
                jsonlite::fromJSON(httr::content(resp, "text", encoding = "UTF-8"))
      } else if (httr::status_code(resp) >= 400 && httr::status_code(resp) <= 499) {
        Response$new("API client error", resp)
      } else if (httr::status_code(resp) >= 500 && httr::status_code(resp) <= 599) {
        Response$new("API server error", resp)
      }

    },
    execute_organization_search = function(search_term, ...){
      args <- list(...)
      queryParams <- list()
      headerParams <- character()

      if (!missing(`search_term`)) {
        body <- `search_term`$toJSONString()
      } else {
        body <- NULL
      }

      urlPath <- "/datastore/search/organizations"
      resp <- self$apiClient$callApi(url = paste0(self$apiClient$basePath, urlPath),
                                 method = "POST",
                                 queryParams = queryParams,
                                 headerParams = headerParams,
                                 body = body,
                                 ...)

      if (httr::status_code(resp) >= 200 && httr::status_code(resp) <= 299) {
                jsonlite::fromJSON(httr::content(resp, "text", encoding = "UTF-8"))
      } else if (httr::status_code(resp) >= 400 && httr::status_code(resp) <= 499) {
        Response$new("API client error", resp)
      } else if (httr::status_code(resp) >= 500 && httr::status_code(resp) <= 599) {
        Response$new("API server error", resp)
      }

    },
    execute_property_type_search = function(search_term, ...){
      args <- list(...)
      queryParams <- list()
      headerParams <- character()

      if (!missing(`search_term`)) {
        body <- `search_term`$toJSONString()
      } else {
        body <- NULL
      }

      urlPath <- "/datastore/search/property_types"
      resp <- self$apiClient$callApi(url = paste0(self$apiClient$basePath, urlPath),
                                 method = "POST",
                                 queryParams = queryParams,
                                 headerParams = headerParams,
                                 body = body,
                                 ...)

      if (httr::status_code(resp) >= 200 && httr::status_code(resp) <= 299) {
                jsonlite::fromJSON(httr::content(resp, "text", encoding = "UTF-8"))
      } else if (httr::status_code(resp) >= 400 && httr::status_code(resp) <= 499) {
        Response$new("API client error", resp)
      } else if (httr::status_code(resp) >= 500 && httr::status_code(resp) <= 599) {
        Response$new("API server error", resp)
      }

    },
    get_entity_sets = function(start, num_results, ...){
      args <- list(...)
      queryParams <- list()
      headerParams <- character()

      urlPath <- "/datastore/search/entity-sets/{start}/{numResults}"
      if (!missing(`start`)) {
        urlPath <- gsub(paste0("\\{", "start", "\\}"), `start`, urlPath)
      }

      if (!missing(`num_results`)) {
        urlPath <- gsub(paste0("\\{", "numResults", "\\}"), `num_results`, urlPath)
      }

      resp <- self$apiClient$callApi(url = paste0(self$apiClient$basePath, urlPath),
                                 method = "GET",
                                 queryParams = queryParams,
                                 headerParams = headerParams,
                                 body = body,
                                 ...)

      if (httr::status_code(resp) >= 200 && httr::status_code(resp) <= 299) {
                jsonlite::fromJSON(httr::content(resp, "text", encoding = "UTF-8"))
      } else if (httr::status_code(resp) >= 400 && httr::status_code(resp) <= 499) {
        Response$new("API client error", resp)
      } else if (httr::status_code(resp) >= 500 && httr::status_code(resp) <= 599) {
        Response$new("API server error", resp)
      }

    },
    get_popular_entity_set = function(...){
      args <- list(...)
      queryParams <- list()
      headerParams <- character()

      urlPath <- "/datastore/search/popular"
      resp <- self$apiClient$callApi(url = paste0(self$apiClient$basePath, urlPath),
                                 method = "GET",
                                 queryParams = queryParams,
                                 headerParams = headerParams,
                                 body = body,
                                 ...)

      if (httr::status_code(resp) >= 200 && httr::status_code(resp) <= 299) {
                jsonlite::fromJSON(httr::content(resp, "text", encoding = "UTF-8"))
      } else if (httr::status_code(resp) >= 400 && httr::status_code(resp) <= 499) {
        Response$new("API client error", resp)
      } else if (httr::status_code(resp) >= 500 && httr::status_code(resp) <= 599) {
        Response$new("API server error", resp)
      }

    },
    search_entity_set_data = function(search_constraints, ...){
      args <- list(...)
      queryParams <- list()
      headerParams <- character()

      if (!missing(`search_constraints`)) {
        body <- `search_constraints`$toJSONString()
      } else {
        body <- NULL
      }

      urlPath <- "/datastore/search"
      resp <- self$apiClient$callApi(url = paste0(self$apiClient$basePath, urlPath),
                                 method = "PATCH",
                                 queryParams = queryParams,
                                 headerParams = headerParams,
                                 body = body,
                                 ...)

      if (httr::status_code(resp) >= 200 && httr::status_code(resp) <= 299) {
                jsonlite::fromJSON(httr::content(resp, "text", encoding = "UTF-8"))
      } else if (httr::status_code(resp) >= 400 && httr::status_code(resp) <= 499) {
        Response$new("API client error", resp)
      } else if (httr::status_code(resp) >= 500 && httr::status_code(resp) <= 599) {
        Response$new("API server error", resp)
      }

    }
  )
)
